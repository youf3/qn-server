---
asyncapi: "2.6.0"
id: "urn:gov:quant-net"
info:
  description: "Quant-Net RPC BSM Experiment Interface"
  title: "RPC SPG Endpoint"
  version: "1.0.0"
components:
  messages:
    RequestMessage:
      name: bsmRequest
      messageId: bsm.request.id
      payload:
        "$ref": "#/components/schemas/bsmRequest"
    ResponseMEssage:
      name: bsmResponse
      messageId: bsm.response.id
      payload:
        "$ref": "#/components/schemas/BSMResponse"
  schemas:
    bsmRequest:
      title: bsmRequest
      type: object
      required:
        - cmd
        - agentId
        - payload
      properties:
        cmd:
          type: string
        agentId:
          type: string
        payload:
          type: object
          required:
            - nodes            
          properties:
            nodes:
              type: array
              minItems: 1
              items:
                type: string
    bsmQuery:
      title: bsmQuery
      type: object
      required:
        - cmd
        - agentId
        - payload
      properties:
        cmd:
          type: string
        agentId:
          type: string
        payload:
          type: object
          required:
            - rid
          properties:
            rid:
              type: string
    BSMResponse:
      title:  bsmResponse
      type: object
      required:
        - status
      properties:
        status:
          $ref: "qn-schema:objects/objects.yaml#/components/schemas/Status"
        rid:
          type: string
        data:
          type: array
          items:
            type: object
    bsmRequestRecord:
      title: bsmRequestRecord
      type: object
      required:
        - phase
        - rid
      properties:
        phase:
          type: string
        rid:
          type: string
        data:
          type: object
        nodes:
          type: array
          minItems: 1
          items:
            type: string
defaultContentType: application/json
